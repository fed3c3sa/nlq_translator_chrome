<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NLQ Translator</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>NLQ Translator</h1>
            <p class="subtitle">Translate natural language to Elasticsearch queries</p>
        </header>

        <div class="tabs">
            <div class="tab-header">
                <button class="tab-button active" data-tab="translate">Translate</button>
                <button class="tab-button" data-tab="fix">Fix</button>
                <button class="tab-button" data-tab="improve">Improve</button>
                <button class="tab-button" data-tab="settings">Settings</button>
            </div>

            <div class="tab-content">
                <!-- Translate Tab -->
                <div class="tab-pane active" id="translate">
                    <div class="form-group">
                        <label for="naturalLanguageQuery">Natural Language Query:</label>
                        <textarea id="naturalLanguageQuery" class="form-control" rows="3" placeholder="Enter your query in natural language, e.g., 'Find documents about climate change published after 2020'"></textarea>
                    </div>
                    <button id="translateButton" class="btn btn-primary">Translate</button>
                </div>

                <!-- Fix Tab -->
                <div class="tab-pane" id="fix">
                    <div class="form-group">
                        <label for="queryToFix">Elasticsearch Query to Fix:</label>
                        <textarea id="queryToFix" class="form-control" rows="6" placeholder="Paste the Elasticsearch query that needs fixing"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="errorMessage">Error Message (Optional):</label>
                        <input type="text" id="errorMessage" class="form-control" placeholder="Enter error message to guide the fix">
                    </div>
                    <button id="fixButton" class="btn btn-primary">Fix Query</button>
                </div>

                <!-- Improve Tab -->
                <div class="tab-pane" id="improve">
                    <div class="form-group">
                        <label for="queryToImprove">Elasticsearch Query to Improve:</label>
                        <textarea id="queryToImprove" class="form-control" rows="6" placeholder="Paste the Elasticsearch query that needs improvement"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="improvementGoal">Improvement Goal:</label>
                        <input type="text" id="improvementGoal" class="form-control" placeholder="E.g., 'Add filters for better performance'">
                    </div>
                    <button id="improveButton" class="btn btn-primary">Improve Query</button>
                </div>

                <!-- Settings Tab -->
                <div class="tab-pane" id="settings">
                    <div class="form-group">
                        <label for="apiKey">OpenAI API Key:</label>
                        <input type="password" id="apiKey" class="form-control" placeholder="Enter your OpenAI API key">
                        <small class="form-text text-muted">Your API key is stored locally and never sent to our servers.</small>
                    </div>
                    <div class="form-group">
                        <label for="mappingJson">Elasticsearch Mapping (JSON):</label>
                        <textarea id="mappingJson" class="form-control" rows="8" placeholder='{"properties": {"title": {"type": "text"}, "content": {"type": "text"}, "date": {"type": "date"}}}'></textarea>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" class="form-check-input" id="saveSettings">
                        <label class="form-check-label" for="saveSettings">Save settings for future use</label>
                    </div>
                    <button id="saveSettingsButton" class="btn btn-primary">Save Settings</button>
                </div>
            </div>
        </div>

        <div class="result-section">
            <div class="result-header">
                <h3>Elasticsearch Query</h3>
                <button id="copyButton" class="btn btn-sm btn-secondary">Copy</button>
            </div>
            <div class="form-group">
                <textarea id="resultQuery" class="form-control" rows="8" readonly></textarea>
            </div>
        </div>

        <div id="statusMessage" class="alert" style="display: none;"></div>
    </div>

    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/popup.js"></script>
</body>
</html>
